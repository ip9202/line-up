# 📝 Change Log

## [2025.09.06] - 라인업 시트 개선 및 안정성 향상

### ✨ 주요 기능 추가
- **라인업 시트 필터링**: 이미 배치된 선수들을 오른쪽 선수목록에서 제외 표시
- **시트뷰 고정 행**: 항상 27개 행을 표시하여 일관된 레이아웃 제공
- **등번호 표시 개선**: '0', '00' 등번호가 올바르게 표시되도록 수정

### 🐛 버그 수정
- **무한 리프레시 해결**: LineupEditor에서 useEffect 무한루프 문제 해결
- **시트보기 버튼**: 새창이 아닌 현재 창에서 열리도록 수정
- **데이터 일관성**: 화면과 프린트에서 동일한 선수 데이터 표시
- **백엔드 중복 키 오류**: 선수 추가 시 unique constraint 충돌 해결

### 🔧 기술적 개선
- **JavaScript falsy value 처리**: 명시적 null/undefined 체크로 변경
- **데이터베이스 트랜잭션**: 중간 커밋으로 제약조건 충돌 방지
- **Pydantic 스키마 검증**: phone 필드를 Optional[str]로 수정
- **React 상태 관리**: useEffect 의존성 배열 최적화

### 📊 수정된 파일
**Frontend:**
- `src/components/LineupSheet.tsx` - 필터링 로직, 등번호 표시, 27행 고정
- `src/pages/LineupSheetPage.tsx` - 프린트 데이터 일관성, 필터링 적용
- `src/pages/LineupEditor.tsx` - useEffect 무한루프 해결, 시트보기 버튼 수정

**Backend:**
- `app/routers/lineups.py` - 선수 추가 로직 개선, 중복 키 오류 해결
- `app/schemas/lineup.py` - PlayerInfo 스키마 검증 개선

---

## [2024.12.19] - 초기 프로젝트 설정

### 🎯 프로젝트 개요
야구 경기 라인업을 생성, 관리, A4 프린팅할 수 있는 웹 서비스 개발

### 🏗️ 기술 스택 구성
**Backend:**
- Python 3.13 + FastAPI
- PostgreSQL + SQLAlchemy
- JWT 인증 시스템
- ReportLab PDF 생성

**Frontend:**
- React 18 + TypeScript
- Tailwind CSS
- React DnD (드래그앤드롭)
- React Query (상태 관리)

### ✅ 완료된 핵심 기능
- **인증 시스템**: JWT 기반 로그인/로그아웃
- **권한 관리**: 총무/감독 역할별 접근 제어
- **선수 관리**: CRUD, 정렬, 검색, 권한 체크
- **경기 관리**: CRUD, 권한 체크  
- **라인업 관리**: CRUD, 드래그앤드롭, 권한 체크
- **PDF 출력**: 한글 지원, A4 출력
- **Docker 환경**: 모든 서비스 정상 작동
- **데이터베이스**: PostgreSQL 연결 및 마이그레이션 완료

### 🎨 UI/UX 디자인
- **모던하고 깔끔한 디자인**
- **회색 플랫 UI** (사용자 선호도 반영)
- **로또 번호 볼 스타일**의 색상 포인트
- **픽토그램 스타일** 아이콘 사용

### 📋 주요 화면
1. **대시보드**: 최근 경기 및 라인업 현황
2. **선수 관리**: 선수 목록 및 상세 정보
3. **경기 관리**: 경기 일정 및 정보 관리
4. **라인업 생성**: 드래그앤드롭 라인업 편집기
5. **라인업 목록**: 저장된 라인업 관리
6. **프린트 미리보기**: A4 라인업 시트 미리보기

### 🚀 배포 환경
- **로컬 개발**: conda py3_13 환경
- **프로덕션**: Railway 플랫폼
- **자동 배포**: GitHub main 브랜치 연동

### 🧪 테스트 데이터
- **선수**: 김철수(투수), 이영희(유격수), 박민수(1루수)
- **경기**: LG 트윈스 vs 크리스마스, 키움 히어로즈 vs 주말
- **라인업**: 3명의 선수로 구성된 테스트 라인업

---

## 🔮 향후 계획

### 우선순위 높음
- [ ] 선수 통계 기능 추가
- [ ] 교체 선수 관리 개선
- [ ] 모바일 반응형 최적화

### 우선순위 중간  
- [ ] 다크 모드 지원
- [ ] 라인업 템플릿 기능
- [ ] 경기 결과 입력

### 우선순위 낮음
- [ ] 선수 사진 업로드
- [ ] 소셜 로그인 연동
- [ ] 푸시 알림

---

## 🐛 알려진 이슈

### 해결됨
- ~~라인업 시트에서 이미 배치된 선수가 중복 표시~~ ✅ 2025.09.06 해결
- ~~등번호 0, 00이 빈 값으로 표시~~ ✅ 2025.09.06 해결  
- ~~시트보기 버튼이 새창에서 열림~~ ✅ 2025.09.06 해결
- ~~LineupEditor 페이지 무한 리프레시~~ ✅ 2025.09.06 해결

### 진행 중
- 없음

### 보류
- 없음

---

## 📈 성능 개선 히스토리

### 2025.09.06
- React useEffect 의존성 최적화로 불필요한 리렌더링 방지
- 데이터베이스 트랜잭션 최적화로 제약조건 충돌 방지
- JavaScript 타입 체크 개선으로 런타임 오류 방지

### 2024.12.19
- SQLAlchemy 관계 로딩 최적화
- React Query 캐싱으로 API 호출 최소화
- Tailwind CSS로 번들 크기 최적화

---

## 🤝 기여자

- **주요 개발**: Claude Code Assistant
- **기획 및 요구사항**: ip9202
- **테스트 및 피드백**: ip9202

---

## 📞 지원

문제가 발생하거나 개선 사항이 있으면 다음을 통해 연락해 주세요:
- **GitHub Issues**: [프로젝트 이슈 페이지](https://github.com/ip9202/line-up/issues)
- **이메일**: 프로젝트 관리자에게 문의